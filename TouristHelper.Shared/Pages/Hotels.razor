@page "/booking/hotels"
@inject NavigationManager Nav
@inject HttpClient Http
@using System.Net.Http.Json

<style>
    .hotel-section {
        padding: 3rem 2rem;
        background: #f9fafb; /* Soft neutral background */
    }

        .hotel-section h2 {
            font-size: 2.25rem;
            font-weight: 700;
            color: #1f2937; /* gray-800 */
            text-align: center;
            margin-bottom: 2rem;
        }

    .hotel-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .hotel-card {
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.03);
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        display: flex;
        flex-direction: column;
    }

        .hotel-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.06);
        }

    .hotel-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .hotel-content {
        padding: 1.5rem;
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .hotel-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #0f766e; /* Teal accent */
        margin-bottom: 0.3rem;
    }

    .hotel-location {
        font-size: 0.9rem;
        color: #6b7280; /* gray-500 */
        margin-bottom: 0.5rem;
    }

    .hotel-rating {
        font-size: 0.85rem;
        color: #facc15; /* amber-400 for star rating */
        margin-bottom: 0.5rem;
    }

    .hotel-amenities {
        font-size: 0.85rem;
        color: #374151; /* gray-700 */
        margin-bottom: 1rem;
    }

    .book-btn {
        background: #0f766e;
        color: #ffffff;
        border: none;
        padding: 0.5rem 1.5rem;
        border-radius: 9999px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 500;
        transition: background 0.2s ease;
        align-self: start;
    }

        .book-btn:hover {
            background: #0d9488;
        }

    /* Responsive tweak for very small screens */
    

    }
</style>

<div class="hotel-section">
    <h2>Available Hotels</h2>

    @if (isLoading)
    {
        <p>Loading hotels...</p>
    }
    else if (hotels?.Any() != true)
    {
        <p>No hotels found.</p>
    }
    else
    {
        <div class="hotel-grid">
            @foreach (var hotel in hotels)
            {
                <div class="hotel-card">
                    <img src="@hotel.Image" alt="@hotel.Name" class="hotel-image" />
                    <div class="hotel-content">
                        <h3 class="hotel-title">@hotel.Name</h3>
                        <p class="hotel-location">@hotel.Location</p>
                        <p class="hotel-rating">⭐ @hotel.Rating</p>
                        <p class="hotel-amenities">Amenities: @hotel.Amenities</p>
                        <button class="book-btn" @onclick="@(() => Nav.NavigateTo($"/booking/hotel/{hotel.HotelId}"))">
                            Book Now
                        </button>
                    </div>
                </div>
            }
        </div>
    }
</div>

@code {
    private List<HotelDto>? hotels;
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            hotels = await Http.GetFromJsonAsync<List<HotelDto>>("api/hotels/list");
        }
        catch
        {
            hotels = new List<HotelDto>();
        }
        isLoading = false;
    }

    public class HotelDto
    {
        public int HotelId { get; set; }
        public string Name { get; set; } = "";
        public string Location { get; set; } = "";
        public string Amenities { get; set; } = "";
        public decimal Rating { get; set; }
        public string Image { get; set; } = "";
    }
}
